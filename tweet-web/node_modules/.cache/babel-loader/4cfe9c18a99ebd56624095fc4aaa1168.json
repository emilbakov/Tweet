{"ast":null,"code":"import _toConsumableArray from\"D:\\\\test\\\\Tweetme\\\\tweet-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\test\\\\Tweetme\\\\tweet-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{loadTweets}from'../lookup';export function TweetComponent(props){var textAreaRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(event);var newVal=textAreaRef.current.value;var tempNewTweets=_toConsumableArray(newTweets);tempNewTweets.unshift({content:newVal,likes:0,id:12331});console.log(newVal);setNewTweets(tempNewTweets);textAreaRef.current.value='';};return/*#__PURE__*/React.createElement(\"div\",{className:props.className},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-3\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\",name:\"tweet\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\"},\"Tweet\"))),/*#__PURE__*/React.createElement(TweetList,{newTweets:newTweets}));}export function ActionBtn(props){var tweet=props.tweet,action=props.action;var _useState3=useState(tweet.likes?tweet.likes:0),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var _useState5=useState(tweet.userLike===true?true:false),_useState6=_slicedToArray(_useState5,2),userLike=_useState6[0],setUserLike=_useState6[1];var className=props.className?props.className:'btn btn-primary btn-sm';var actionDisplay=action.display?action.display:'Action';var display=action.type==='like'?\"\".concat(likes,\" \").concat(action.display):actionDisplay;var handleClick=function handleClick(event){event.preventDefault();if(action.type==='like'){if(userLike===true){setLikes(likes-1);setUserLike(false);}else{setLikes(likes+1);setUserLike(true);}}};return/*#__PURE__*/React.createElement(\"button\",{className:className,onClick:handleClick},\" \",display,\" \");}export function Tweet(props){var tweet=props.tweet;var className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/React.createElement(\"div\",{className:className},/*#__PURE__*/React.createElement(\"p\",null,tweet.id,\"-\",tweet.content),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-group\"},/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'like',display:\"Likes\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'unlike',display:\"Unlike\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'retweet',display:\"Retweet\"}})));}export function TweetList(props){var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweetsInit=_useState8[0],setTweetsInit=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tweets=_useState10[0],setTweets=_useState10[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){//Lookup\nvar myCallback=function myCallback(response,status){if(status===200){setTweetsInit(response);}else{alert(\"There was an error\");}};loadTweets(myCallback);},[]);return tweets.map(function(item,index){return/*#__PURE__*/React.createElement(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\",key:\"\".concat(index,\"-{item.id}\")});});}","map":{"version":3,"sources":["D:/test/Tweetme/tweet-web/src/tweets/components.js"],"names":["React","useEffect","useState","loadTweets","TweetComponent","props","textAreaRef","createRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","console","log","newVal","current","value","tempNewTweets","unshift","content","likes","id","className","ActionBtn","tweet","action","setLikes","userLike","setUserLike","actionDisplay","display","type","handleClick","Tweet","TweetList","tweetsInit","setTweetsInit","tweets","setTweets","final","concat","length","myCallback","response","status","alert","map","item","index"],"mappings":"wTAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAyBC,QAAzB,KAAwC,OAAxC,CAEA,OAAQC,UAAR,KAAyB,WAAzB,CAGA,MAAO,SAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,CAClC,GAAMC,CAAAA,WAAW,CAAGN,KAAK,CAACO,SAAN,EAApB,CADkC,cAEDL,QAAQ,CAAC,EAAD,CAFP,wCAE3BM,SAF2B,eAEhBC,YAFgB,eAGlC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAU,CAC3BA,KAAK,CAACC,cAAN,GACAC,OAAO,CAACC,GAAR,CAAYH,KAAZ,EAEA,GAAMI,CAAAA,MAAM,CAAGT,WAAW,CAACU,OAAZ,CAAoBC,KAAnC,CACA,GAAIC,CAAAA,aAAa,oBAAMV,SAAN,CAAjB,CACAU,aAAa,CAACC,OAAd,CAAsB,CAClBC,OAAO,CAACL,MADU,CAElBM,KAAK,CAAC,CAFY,CAGlBC,EAAE,CAAC,KAHe,CAAtB,EAKAT,OAAO,CAACC,GAAR,CAAYC,MAAZ,EACAN,YAAY,CAACS,aAAD,CAAZ,CACAZ,WAAW,CAACU,OAAZ,CAAoBC,KAApB,CAA0B,EAA1B,CACH,CAdD,CAeA,mBAAO,2BAAK,SAAS,CAAEZ,KAAK,CAACkB,SAAtB,eACK,2BAAK,SAAS,CAAC,aAAf,eACI,4BAAM,QAAQ,CAAEb,YAAhB,eACI,gCAAU,GAAG,CAAEJ,WAAf,CAA4B,QAAQ,CAAE,IAAtC,CAA4C,SAAS,CAAC,cAAtD,CAAqE,IAAI,CAAC,OAA1E,EADJ,cAGI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,UAHJ,CADJ,CADL,cAQC,oBAAC,SAAD,EAAW,SAAS,CAAEE,SAAtB,EARD,CAAP,CAUH,CAED,MAAO,SAASgB,CAAAA,SAAT,CAAmBnB,KAAnB,CAAyB,IACtBoB,CAAAA,KADsB,CACLpB,KADK,CACtBoB,KADsB,CACfC,MADe,CACLrB,KADK,CACfqB,MADe,gBAEHxB,QAAQ,CAACuB,KAAK,CAACJ,KAAN,CAAcI,KAAK,CAACJ,KAApB,CAA0B,CAA3B,CAFL,yCAErBA,KAFqB,eAEfM,QAFe,8BAGGzB,QAAQ,CAACuB,KAAK,CAACG,QAAN,GAAmB,IAAnB,CAA0B,IAA1B,CAA+B,KAAhC,CAHX,yCAGtBA,QAHsB,eAGZC,WAHY,eAI5B,GAAMN,CAAAA,SAAS,CAAGlB,KAAK,CAACkB,SAAN,CAAkBlB,KAAK,CAACkB,SAAxB,CAAkC,wBAApD,CACA,GAAMO,CAAAA,aAAa,CAAGJ,MAAM,CAACK,OAAP,CAAiBL,MAAM,CAACK,OAAxB,CAAiC,QAAvD,CACA,GAAMA,CAAAA,OAAO,CAAGL,MAAM,CAACM,IAAP,GAAe,MAAf,WAA0BX,KAA1B,aAAmCK,MAAM,CAACK,OAA1C,EAAqDD,aAArE,CACA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACtB,KAAD,CAAW,CAC3BA,KAAK,CAACC,cAAN,GACA,GAAIc,MAAM,CAACM,IAAP,GAAe,MAAnB,CAA2B,CACvB,GAAGJ,QAAQ,GAAK,IAAhB,CAAsB,CAClBD,QAAQ,CAACN,KAAK,CAAC,CAAP,CAAR,CACAQ,WAAW,CAAC,KAAD,CAAX,CACH,CAHD,IAGO,CACHF,QAAQ,CAACN,KAAK,CAAC,CAAP,CAAR,CACAQ,WAAW,CAAC,IAAD,CAAX,CACH,CAEJ,CACJ,CAZD,CAaA,mBAAO,8BAAQ,SAAS,CAAEN,SAAnB,CAA8B,OAAO,CAAGU,WAAxC,MAAuDF,OAAvD,KAAP,CACD,CAGH,MAAO,SAASG,CAAAA,KAAT,CAAe7B,KAAf,CAAsB,IACnBoB,CAAAA,KADmB,CACVpB,KADU,CACnBoB,KADmB,CAEzB,GAAMF,CAAAA,SAAS,CAAGlB,KAAK,CAACkB,SAAN,CAAkBlB,KAAK,CAACkB,SAAxB,CAAoC,yBAAtD,CACA,mBAAO,2BAAK,SAAS,CAAEA,SAAhB,eACL,6BAAIE,KAAK,CAACH,EAAV,KAAeG,KAAK,CAACL,OAArB,CADK,cAEL,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,SAAD,EAAW,KAAK,CAAEK,KAAlB,CAAyB,MAAM,CAAE,CAACO,IAAI,CAAC,MAAN,CAAcD,OAAO,CAAC,OAAtB,CAAjC,EADF,cAEE,oBAAC,SAAD,EAAW,KAAK,CAAEN,KAAlB,CAAyB,MAAM,CAAE,CAACO,IAAI,CAAC,QAAN,CAAgBD,OAAO,CAAC,QAAxB,CAAjC,EAFF,cAGE,oBAAC,SAAD,EAAW,KAAK,CAAEN,KAAlB,CAAyB,MAAM,CAAE,CAACO,IAAI,CAAC,SAAN,CAAiBD,OAAO,CAAC,SAAzB,CAAjC,EAHF,CAFK,CAAP,CAQD,CAGH,MAAO,SAASI,CAAAA,SAAT,CAAmB9B,KAAnB,CAA0B,gBACIH,QAAQ,CAAC,EAAD,CADZ,yCACzBkC,UADyB,eACbC,aADa,8BAEJnC,QAAQ,CAAC,EAAD,CAFJ,0CAExBoC,MAFwB,gBAEjBC,SAFiB,gBAG/BtC,SAAS,CAAC,UAAI,CACV,GAAMuC,CAAAA,KAAK,CAAG,mBAAInC,KAAK,CAACG,SAAV,EAAqBiC,MAArB,CAA4BL,UAA5B,CAAd,CACA,GAAGI,KAAK,CAACE,MAAN,GAAiBJ,MAAM,CAACI,MAA3B,CAAmC,CACjCH,SAAS,CAACC,KAAD,CAAT,CACD,CAEJ,CANQ,CAMN,CAACnC,KAAK,CAACG,SAAP,CAAiB8B,MAAjB,CAAwBF,UAAxB,CANM,CAAT,CAQAnC,SAAS,CAAC,UAAI,CACZ;AACA,GAAM0C,CAAAA,UAAU,CAAE,QAAZA,CAAAA,UAAY,CAACC,QAAD,CAAUC,MAAV,CAAoB,CACpC,GAAIA,MAAM,GAAG,GAAb,CAAiB,CACfR,aAAa,CAACO,QAAD,CAAb,CACD,CAFD,IAEM,CACJE,KAAK,CAAC,oBAAD,CAAL,CACD,CACF,CAND,CAOA3C,UAAU,CAACwC,UAAD,CAAV,CAED,CAXQ,CAWN,EAXM,CAAT,CAYA,MAAOL,CAAAA,MAAM,CAACS,GAAP,CAAW,SAACC,IAAD,CAAMC,KAAN,CAAc,CAC9B,mBAAO,oBAAC,KAAD,EAAO,KAAK,CAAED,IAAd,CAAoB,SAAS,CAAC,qCAA9B,CAAoE,GAAG,WAAMC,KAAN,cAAvE,EAAP,CAED,CAHM,CAAP,CAKD","sourcesContent":["import React,{useEffect, useState} from 'react'\r\n\r\nimport {loadTweets} from '../lookup'\r\n\r\n\r\nexport function TweetComponent(props) {\r\n    const textAreaRef = React.createRef()\r\n    const [newTweets, setNewTweets]= useState([])\r\n    const handleSubmit = (event) =>{\r\n        event.preventDefault()\r\n        console.log(event) \r\n        \r\n        const newVal = textAreaRef.current.value\r\n        let tempNewTweets =[...newTweets]\r\n        tempNewTweets.unshift({\r\n            content:newVal,\r\n            likes:0,\r\n            id:12331\r\n        })\r\n        console.log(newVal)\r\n        setNewTweets(tempNewTweets)\r\n        textAreaRef.current.value='' \r\n    }\r\n    return <div className={props.className}>\r\n                <div className='col-12 mb-3'>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <textarea ref={textAreaRef} required={true} className='form-control' name='tweet'>\r\n                        </textarea>\r\n                        <button type='submit' className='btn btn-primary my-3'>Tweet</button>    \r\n                    </form>\r\n                </div>\r\n            <TweetList newTweets={newTweets}/>\r\n    </div>    \r\n}\r\n\r\nexport function ActionBtn(props){\r\n    const{tweet, action} = props\r\n    const [likes,setLikes] = useState(tweet.likes ? tweet.likes:0)\r\n    const[userLike, setUserLike] = useState(tweet.userLike === true ? true:false)\r\n    const className = props.className ? props.className:'btn btn-primary btn-sm'\r\n    const actionDisplay = action.display ? action.display: 'Action'\r\n    const display = action.type ==='like'? `${likes} ${action.display}`: actionDisplay\r\n    const handleClick = (event) => {\r\n        event.preventDefault()\r\n        if (action.type ==='like') {\r\n            if(userLike === true) {\r\n                setLikes(likes-1)\r\n                setUserLike(false)\r\n            } else {\r\n                setLikes(likes+1)\r\n                setUserLike(true)\r\n            }\r\n            \r\n        }\r\n    }\r\n    return <button className={className} onClick= {handleClick}> {display} </button> \r\n  }\r\n  \r\n  \r\nexport function Tweet(props) {\r\n    const{tweet} = props\r\n    const className = props.className ? props.className : 'col-10 mx-auto col-md-6'\r\n    return <div className={className}>\r\n      <p>{tweet.id}-{tweet.content}</p>\r\n      <div className='btn btn-group'>\r\n        <ActionBtn tweet={tweet} action={{type:'like', display:\"Likes\"}}/>\r\n        <ActionBtn tweet={tweet} action={{type:'unlike', display:\"Unlike\"}}/>\r\n        <ActionBtn tweet={tweet} action={{type:'retweet', display:\"Retweet\"}}/>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n\r\nexport function TweetList(props) {\r\n  const[tweetsInit, setTweetsInit] = useState([])\r\n  const [tweets,setTweets] = useState([])\r\n  useEffect(()=>{\r\n      const final = [...props.newTweets].concat(tweetsInit)\r\n      if(final.length !== tweets.length) {\r\n        setTweets(final)\r\n      } \r\n\r\n  }, [props.newTweets,tweets,tweetsInit])\r\n\r\n  useEffect(()=>{\r\n    //Lookup\r\n    const myCallback= (response,status) =>{      \r\n      if (status===200){\r\n        setTweetsInit(response)\r\n      } else{\r\n        alert(\"There was an error\")\r\n      }      \r\n    }\r\n    loadTweets(myCallback)  \r\n\r\n  }, [])\r\n  return tweets.map((item,index)=>{ \r\n    return <Tweet tweet={item} className='my-5 py-5 border bg-white text-dark' key ={`${index}-{item.id}`}/>\r\n\r\n  })\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}