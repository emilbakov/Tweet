{"ast":null,"code":"import _toConsumableArray from\"D:\\\\test\\\\Tweetme\\\\tweet-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\test\\\\Tweetme\\\\tweet-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{apiTweetList}from'./lookup';import{Tweet}from'./detail';export function TweetList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tweetsInit=_useState2[0],setTweetsInit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweets=_useState4[0],setTweets=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),nextUrl=_useState6[0],setNextUrl=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),tweetsDidSet=_useState8[0],setTweetsDidSet=_useState8[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){//Lookup\nif(tweetsDidSet===false){var handleTweetListLookup=function handleTweetListLookup(response,status){if(status===200){setNextUrl(response.next);setTweetsInit(response.results);setTweetsDidSet(true);}else{alert(\"There was an error\");}};apiTweetList(props.username,handleTweetListLookup);}},[tweetsInit,tweetsDidSet,setTweetsDidSet,props.username]);var handleDidRetweet=function handleDidRetweet(newTweet){var updateTweetsInit=_toConsumableArray(tweetsInit);updateTweetsInit.unshift(newTweet);setTweetsInit(updateTweetsInit);var updateFinalTweets=_toConsumableArray(tweets);updateFinalTweets.unshift(tweets);setTweetsInit(updateFinalTweets);};var handleLoadNext=function handleLoadNext(event){event.preventDefault();if(nextUrl!==null){var handleLoadNextResponse=function handleLoadNextResponse(response,status){if(status===200){setNextUrl(response.next);var newTweets=_toConsumableArray(tweets).concat(response.results);setTweetsInit(newTweets);setTweets(newTweets);}else{alert(\"There was an error\");}};apiTweetList(props.username,handleLoadNextResponse,nextUrl);}};return/*#__PURE__*/React.createElement(React.Fragment,null,tweets.map(function(item,index){return/*#__PURE__*/React.createElement(Tweet,{didRetweet:handleDidRetweet,tweet:item,className:\"my-5 py-5 border bg-white text-dark\",key:\"\".concat(index,\"-{item.id}\")});}),nextUrl!==null&&/*#__PURE__*/React.createElement(\"button\",{onClick:handleLoadNext,className:\"btn btn-primary\"},\"Load next\"));}","map":{"version":3,"sources":["D:/test/Tweetme/tweet-web/src/tweets/list.js"],"names":["React","useEffect","useState","apiTweetList","Tweet","TweetList","props","tweetsInit","setTweetsInit","tweets","setTweets","nextUrl","setNextUrl","tweetsDidSet","setTweetsDidSet","final","newTweets","concat","length","handleTweetListLookup","response","status","next","results","alert","username","handleDidRetweet","newTweet","updateTweetsInit","unshift","updateFinalTweets","handleLoadNext","event","preventDefault","handleLoadNextResponse","map","item","index"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react'\r\nimport {apiTweetList} from './lookup'\r\nimport {Tweet} from './detail'\r\n\r\n\r\nexport function TweetList(props) {\r\n    const[tweetsInit, setTweetsInit] = useState([])\r\n    const [tweets,setTweets] = useState([])\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    const [tweetsDidSet, setTweetsDidSet] = useState(false)\r\n    useEffect(()=>{\r\n        const final = [...props.newTweets].concat(tweetsInit)\r\n        if(final.length !== tweets.length) {\r\n          setTweets(final)\r\n        } \r\n  \r\n    }, [props.newTweets,tweets,tweetsInit])\r\n  \r\n    useEffect(()=>{\r\n        //Lookup\r\n        if (tweetsDidSet=== false) {\r\n        const handleTweetListLookup= (response,status) =>{      \r\n          if (status===200){\r\n            setNextUrl(response.next)\r\n            setTweetsInit(response.results)\r\n            setTweetsDidSet(true)\r\n          } else{\r\n            alert(\"There was an error\")\r\n          }      \r\n        }\r\n        apiTweetList(props.username,handleTweetListLookup)  \r\n      }\r\n    }, [tweetsInit,tweetsDidSet,setTweetsDidSet,props.username])\r\n    \r\n    const handleDidRetweet = (newTweet)=>{\r\n      const updateTweetsInit =[...tweetsInit]\r\n      updateTweetsInit.unshift(newTweet)\r\n      setTweetsInit(updateTweetsInit)\r\n      const updateFinalTweets =[...tweets]\r\n      updateFinalTweets.unshift(tweets)\r\n      setTweetsInit(updateFinalTweets)\r\n  \r\n    }\r\n    const handleLoadNext= (event) => {\r\n      event.preventDefault()\r\n      if(nextUrl !== null){\r\n        const handleLoadNextResponse = (response ,status) => {\r\n          if (status===200){\r\n            setNextUrl(response.next)\r\n            const newTweets = [...tweets].concat(response.results)\r\n            setTweetsInit(newTweets)\r\n            setTweets(newTweets)            \r\n          } else{\r\n            alert(\"There was an error\")\r\n          }\r\n        }\r\n        apiTweetList(props.username,handleLoadNextResponse, nextUrl)\r\n      }\r\n    }\r\n    return <React.Fragment>{tweets.map((item,index)=>{ \r\n      return <Tweet didRetweet={handleDidRetweet} tweet={item} className='my-5 py-5 border bg-white text-dark' key ={`${index}-{item.id}`}/>\r\n  \r\n    })}\r\n    { nextUrl !== null && <button  onClick ={handleLoadNext} className='btn btn-primary'>Load next</button>}\r\n    </React.Fragment>\r\n  }\r\n  "]},"metadata":{},"sourceType":"module"}